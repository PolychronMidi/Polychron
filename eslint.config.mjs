export default [
  {
    ignores: [
      '**/*.mjs',
      'node_modules/**',
      'csv_maestro/**',
      'output/**',
      '__pycache__/**',
      'output/*.csv',
      'output/*.mid',
      'output/*.wav',
      'test/**'
    ]
  },
  {
    languageOptions: {
      ecmaVersion: 'latest',
      sourceType: 'script',
      globals: {
        // Math alias
        m: 'readonly',
        // Timing globals
        numerator: 'writable',
        denominator: 'writable',
        meterRatio: 'writable',
        midiMeter: 'writable',
        midiMeterRatio: 'writable',
        syncFactor: 'writable',
        midiBPM: 'writable',
        tpSec: 'writable',
        tpMeasure: 'writable',
        spMeasure: 'writable',
        phraseStart: 'writable',
        phraseStartTime: 'writable',
        sectionStart: 'writable',
        sectionStartTime: 'writable',
        sectionEnd: 'writable',
        measureStart: 'writable',
        measureStartTime: 'writable',
        beatStart: 'writable',
        beatStartTime: 'writable',
        divStart: 'writable',
        divStartTime: 'writable',
        subdivStart: 'writable',
        subdivStartTime: 'writable',
        subsubdivStart: 'writable',
        subsubdivStartTime: 'writable',
        tpBeat: 'writable',
        spBeat: 'writable',
        tpDiv: 'writable',
        spDiv: 'writable',
        tpSubdiv: 'writable',
        spSubdiv: 'writable',
        tpSubsubdiv: 'writable',
        spSubsubdiv: 'writable',
        tpPhrase: 'writable',
        spPhrase: 'writable',
        tpSection: 'writable',
        spSection: 'writable',
        trueBPM: 'writable',
        trueBPM2: 'writable',
        bpmRatio: 'writable',
        bpmRatio2: 'writable',
        bpmRatio3: 'writable',
        divsPerBeat: 'writable',
        subdivsPerDiv: 'writable',
        subdivsPerMinute: 'writable',
        subsubdivsPerSub: 'writable',
        subsubdivsPerMinute: 'writable',
        subdivFreq: 'writable',
        measuresPerPhrase: 'writable',
        measuresPerPhrase1: 'writable',
        measuresPerPhrase2: 'writable',
        polyNumerator: 'writable',
        polyDenominator: 'writable',
        polyMeterRatio: 'writable',
        // Rhythm tracking
        beatRhythm: 'writable',
        divRhythm: 'writable',
        subdivRhythm: 'writable',
        subsubdivRhythm: 'writable',
        // Index variables
        sectionIndex: 'writable',
        phraseIndex: 'writable',
        measureIndex: 'writable',
        beatIndex: 'writable',
        divIndex: 'writable',
        subdivIndex: 'writable',
        subsubdivIndex: 'writable',
        // Structure
        totalSections: 'writable',
        phrasesPerSection: 'writable',
        // Temporary variables (used in functions)
        unit: 'writable',
        unitsPerParent: 'writable',
        startTick: 'writable',
        endTick: 'writable',
        startTime: 'writable',
        endTime: 'writable',
        composerDetails: 'writable',
        progressionSymbols: 'writable',
        actualMeter: 'writable',
        isPowerOf2: 'writable',
        // Buffer/Layer
        c: 'writable',
        c1: 'writable',
        c2: 'writable',
        CSVBuffer: 'writable',
        LM: 'writable',
        layerManager: 'writable',
        TimingContext: 'writable',
        // Configuration
        BPM: 'readonly',
        PPQ: 'readonly',
        TUNING_FREQ: 'readonly',
        LOG: 'readonly',
        BINAURAL: 'readonly',
        SILENT_OUTRO_SECONDS: 'readonly',
        SECTIONS: 'readonly',
        PHRASES_PER_SECTION: 'readonly',
        NUMERATOR: 'readonly',
        DENOMINATOR: 'readonly',
        MEASURES_PER_PHRASE: 'readonly',
        DIVISIONS: 'readonly',
        SUBDIVISIONS: 'readonly',
        SUBSUBDIVISIONS: 'readonly',
        VOICES: 'readonly',
        OCTAVES: 'readonly',
        COMPOSER_TYPES: 'readonly',
        primaryInstrument: 'readonly',
        secondaryInstrument: 'readonly',
        otherInstruments: 'readonly',
        bassInstrument: 'readonly',
        bassInstrument2: 'readonly',
        otherBassInstruments: 'readonly',
        drumSets: 'readonly',
        // Composers
        composer: 'writable',
        composers: 'writable',
        MeasureComposer: 'writable',
        ScaleComposer: 'writable',
        RandomScaleComposer: 'writable',
        ChordComposer: 'writable',
        RandomChordComposer: 'writable',
        ModeComposer: 'writable',
        RandomModeComposer: 'writable',
        // Functions
        getMidiTiming: 'writable',
        setMidiTiming: 'writable',
        getPolyrhythm: 'writable',
        setUnitTiming: 'writable',
        formatTime: 'writable',
        setRhythm: 'writable',
        trackBeatRhythm: 'writable',
        trackDivRhythm: 'writable',
        trackSubdivRhythm: 'writable',
        trackSubsubdivRhythm: 'writable',
        logUnit: 'writable',
        p: 'writable',
        pushMultiple: 'writable',
        grandFinale: 'writable',
        fs: 'writable',
        setTuningAndInstruments: 'writable',
        // MIDI/Venue
        midiData: 'readonly',
        getMidiValue: 'writable',
        allCHs: 'readonly',
        source: 'readonly',
        bass: 'readonly',
        lCH1: 'readonly',
        lCH2: 'readonly',
        rCH1: 'readonly',
        rCH2: 'readonly',
        cCH1: 'readonly',
        cCH2: 'readonly',
        cCH3: 'readonly',
        drumCH: 'readonly',
        tuningPitchBend: 'readonly',
        // Rhythm
        drumMap: 'readonly',
        drummer: 'writable',
        patternLength: 'writable',
        makeOnsets: 'writable',
        // Stage functions
        binaural: 'writable',
        stutter: 'writable',
        note: 'writable',
        // Backstage utils
        clamp: 'writable',
        clampMod: 'writable',
        clampSoft: 'writable',
        clampStep: 'writable',
        clampLog: 'writable',
        clampExp: 'writable',
        rf: 'writable',
        ri: 'writable',
        ra: 'writable',
        rw: 'writable',
        rd: 'writable',
        rlc: 'writable',
        normalizeWeights: 'writable',
        allNotesOff: 'writable',
        muteAll: 'writable',
        // Node.js globals
        require: 'readonly',
        module: 'readonly',
        exports: 'writable',
        __dirname: 'readonly',
        __filename: 'readonly',
        global: 'readonly',
        process: 'readonly',
        console: 'readonly',
        Buffer: 'readonly',
        setTimeout: 'readonly',
        clearTimeout: 'readonly',
        setInterval: 'readonly',
        clearInterval: 'readonly',
        setImmediate: 'readonly',
        clearImmediate: 'readonly',
        globalThis: 'readonly'
      }
    },
    rules: {
      'no-irregular-whitespace': 'error',
      'no-unexpected-multiline': 'error',
      'no-useless-escape': 'warn',
      'no-trailing-spaces': 'warn',
      'eol-last': ['warn', 'always'],
      'no-undef': 'off',  // Disabled: codebase uses hundreds of implicit globals
      'no-unused-vars': 'off'
    }
  }
];
